local Library = loadstring(Game:HttpGet("https://raw.githubusercontent.com/bloodball/-back-ups-for-libs/main/wizard"))()

local MainWindow = Library:NewWindow("Lemon V1.3.2")

local MainSection = MainWindow:NewSection("Main")

getgenv().AutoFarm = false
getgenv().KeyAutoFarm = false
getgenv().ItemAutoFarm = "false"

local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

local storages = workspace.Storages

local function StorageAutoFarm()
    while AutoFarm == true do
        for _, storage in pairs(storages:GetChildren()) do
            if AutoFarm == false then break end
                if storage:IsA("Model") then
                    local handle = storage.Door:FindFirstChild("Handle")
                    if handle then
                        character.HumanoidRootPart.CFrame = handle.CFrame
                        local prompt = handle:FindFirstChildWhichIsA("ProximityPrompt")
                        if prompt then
                        task.wait(0.5)
                        fireproximityprompt(prompt)
                        task.wait(1)
                            local contents = storage:FindFirstChild("Contents")
                            if contents then
                                local loot = contents:FindFirstChild("Loot")
                                if loot then
                                    for _, item in pairs(loot:GetDescendants()) do
                                        if item:IsA("ProximityPrompt") then
                                            if ItemAutoFarm == "false" then
                                                if item.Parent:IsA("Part") or item.Parent:IsA("MeshPart") then
                                                    character.HumanoidRootPart.CFrame = item.Parent.CFrame
                                                    local Itemprompt = item
                                                    if Itemprompt then
                                                    wait(0.1)
                                                    fireproximityprompt(Itemprompt)
                                                    wait(0.2)
                                                    end
                                                elseif item.Parent:IsA("Model") then
                                                    character.HumanoidRootPart.CFrame = item.Parent.PrimaryPart.CFrame
                                                    local Itemprompt = item
                                                    if prompt then
                                                        wait(0.1)
                                                        fireproximityprompt(Itemprompt)
                                                        wait(0.2)
                                                end
                                            else ItemAutoFarm ~= "false" then
                                                if item.Parent.Name == ItemAutoFarm then
                                                    if item.Parent:IsA("Part") or item.Parent:IsA("MeshPart") then
                                                        character.HumanoidRootPart.CFrame = item.Parent.CFrame
                                                        local Itemprompt = item
                                                        if Itemprompt then
                                                        wait(0.1)
                                                        fireproximityprompt(Itemprompt)
                                                        wait(0.2)
                                                        end
                                                    elseif item.Parent:IsA("Model") then
                                                        character.HumanoidRootPart.CFrame = item.Parent.PrimaryPart.CFrame
                                                        local Itemprompt = item
                                                        if prompt then
                                                            wait(0.1)
                                                            fireproximityprompt(Itemprompt)
                                                            wait(0.2)
                                                        end
                                                    end
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
        end
        wait()
    end
end

local function KeyStorageAutoFarm()
    while KeyAutoFarm == true do
        for _, storage in pairs(storages:GetChildren()) do
            if KeyAutoFarm == false then break end
                if storage:IsA("Model") then
                    local handle = storage.Door:FindFirstChild("Handle")
                    if handle then
                        character.HumanoidRootPart.CFrame = handle.CFrame
                        local prompt = handle:FindFirstChildWhichIsA("ProximityPrompt")
                        if prompt then
                        task.wait(0.5)
                        fireproximityprompt(prompt)
                        task.wait(1)
                            local contents = storage:FindFirstChild("Contents")
                            if contents then
                                local loot = contents:FindFirstChild("Loot")
                                if loot then
                                    for _, Skull in pairs(loot:GetDescendants()) do
                                        if Skull:IsA("ProximityPrompt") then
                                            if Skull.Parent:IsA("Part") or Skull.Parent:IsA("MeshPart") then
                                                character.HumanoidRootPart.CFrame = Skull.Parent.CFrame
                                                local Skullprompt = Skull
                                                if Skullprompt then
                                                wait(0.1)
                                                fireproximityprompt(Skullprompt)
                                                wait(0.2)
                                                end
                                            elseif Skull.Parent:IsA("Model") then
                                                character.HumanoidRootPart.CFrame = Skull.Parent.PrimaryPart.CFrame
                                                local Skullprompt = Skull
                                                if prompt then
                                                    wait(0.1)
                                                    fireproximityprompt(Skullprompt)
                                                    wait(0.2)
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
        end
        wait()
    end
end


MainSection:CreateToggle("AutoFarm", function(value)
    AutoFarm = value
    StorageAutoFarm()
end)

MainSection:CreateTextbox("Item to Farm", function(text)
    ItemAutoFarm = text
end)

MainSection:CreateToggle("Key AutoFarm", function(value)
    KeyAutoFarm = value
    KeyStorageAutoFarm()
end)

MainSection:CreateButton("Debug", function()
    loadstring(game:HttpGet('https://raw.githubusercontent.com/L3monnn/RobloxScripts/Games/TheStorage'))()
end)
